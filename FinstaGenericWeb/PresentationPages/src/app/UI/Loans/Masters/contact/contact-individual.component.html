

  <div *ngIf="showPage">
    <form [formGroup]="contactForm" autocomplete="off">
      <div class="row mt-1">
        <div class="col-12">
          <h2 class="sec-head">Personal Details</h2>
        </div>
        <div class="col-md-6 col-xl-4 p-0">
          <div class="col-md-12 col-xl-12">
            <div class="form-group">
              <label id="pName" title="First Name">First Name</label>
              <label id="pTitleName" title="Title" hidden></label>
              <div class="input-group">
                <div class="input-group-append">
                  <select class=" btn-lg-icon rounded-left pl-1" formControlName="pTitleName" [ngClass]="{ 'is-invalid': contactValidationErrors.pTitleName }">
                    <option value="" ng-selected="selected">Select</option>
                    <option *ngFor="let titletype of titleDetails" [value]="titletype.pTitleName">{{titletype.pTitleName}}</option>


                  </select>
                </div>
                <input class="form-control" maxlength="75" type="text" appCharactersonly formControlName="pName" [ngClass]="{ 'is-invalid': contactValidationErrors.pName }">
                <div class="invalid-feedback">
                  <span *ngIf="contactValidationErrors.pName">{{contactValidationErrors.pTitleName}}</span>
                  <span *ngIf="contactValidationErrors.pName">{{contactValidationErrors.pName}}</span>
                </div>

              </div>
            </div>
          </div>
          <!--col-end-->
          <div class="col-md-12 col-xl-12">
            <div class="form-group">
              <label id="pSurName" title="Last Name">Last Name</label>
              <input class="form-control" type="text" maxlength="50" appCharactersonly formControlName="pSurName" [ngClass]="{ 'is-invalid': contactValidationErrors.pSurName }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pSurName">{{contactValidationErrors.pSurName}}</span>
              </div>
            </div>
          </div>
          <!--col-end-->
          <div class="d-flex col-md-12 col-xl-12">
            <div class="col-md-6 col-xl-6 pl-0">
              <label id="pDob" title="Date of Birth">Date of Birth</label>
              <input class="form-control" type="date" formControlName="pDob" [ngClass]="{ 'is-invalid': contactValidationErrors.pDob }" (blur)="ageCalculation()">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pDob">{{contactValidationErrors.pDob}}</span>
              </div>
              <!--<small class="form-text">Error message or hint will go here</small>-->
            </div>
            <div class="col-md-6 col-xl-6 pr-0">
              <label id="pAge" title="Age">Age</label>
              <input class="form-control" type="text" readonly formControlName="pAge" maxlength="20" [ngClass]="{ 'is-invalid': contactValidationErrors.pAge }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pAge">{{contactValidationErrors.pAge}}</span>
              </div>
              <!--<small class="form-text">Error message or hint will go here</small>-->
            </div>
          </div>
        </div>
        <div class="col-md-4 col-xl-4 ml-5">

          <!--<p class="text-center profile-mt">
          <img [src]="croppedImage" alt="img" class="rounded-circle" width="120px"
               height="120px" title="uplaod Photo here" />
        </p>-->
          <p class="mb-0 text-center">
            <a href="#photo" data-toggle="modal" class="RL13">
              <img [src]="croppedImage" alt="img" class="rounded-circle" width="120px"
                   height="120px" title="uplaod Photo here" />
            </a>
          </p>


          <!--<input type="file" id="upload" name="profile_img" style="visibility: hidden;">
        <a href="" onclick="document.getElementById('upload').click();"> <img class="" src="assets/images/placeholder_02.png" alt="Profile" width="160" height="160" title="uplaod Photo here"> </a>-->

        </div>

      </div>
      <hr class="light">
      <div class="row">
        <div class="col-md-6 col-xl-4">
          <label id="pGender" title="Gender" class="col-md-12 col-xl-12 pl-0">Gender</label>
          <div class="form-check form-check-inline ">
            <input class="form-check-input" type="radio" id="employement" name="pGender" value="Male" formControlName="pGender" [ngClass]="{ 'is-invalid': contactValidationErrors.pGender }">
            <label class="p-0 mt-1 ml-1" for="inlineRadio1"> Male &nbsp; &nbsp; </label>
            <input class="form-check-input" type="radio" id="employement" name="pGender" value="Female" formControlName="pGender" [ngClass]="{ 'is-invalid': contactValidationErrors.pGender }">
            <label class="p-0 mt-1 ml-1 " for="inlineRadio1"> Female &nbsp; &nbsp;</label>
            <input class="form-check-input" type="radio" name="pGender" id="employement" value="Third Gender" formControlName="pGender" [ngClass]="{ 'is-invalid': contactValidationErrors.pGender }">
            <label class="p-0 mt-1 ml-1" for="inlineRadio1"> Third Gender </label>
          </div>
          <div class="invalid-feedback-cst">
            <span *ngIf="contactValidationErrors.pGender">{{contactValidationErrors.pGender}}</span>
          </div>

        </div>
        <div class="col-md-6 col-xl-4">
          <label id="pFatherName" title="Father Name">Father Name</label>
          <input class="form-control" type="text" maxlength="75" appCharactersonly formControlName="pFatherName" [ngClass]="{ 'is-invalid': contactValidationErrors.pFatherName }">
          <div class="invalid-feedback">
            <span *ngIf="contactValidationErrors.pFatherName">{{contactValidationErrors.pFatherName}}</span>
          </div>
          <!--<small class="form-text">Error message or hint will go here</small>-->
        </div>
        <div class="col-md-6 col-xl-4">
          <label id="pSpouseName" title="Spouse Name">Spouse Name</label>
          <input class="form-control" type="text" maxlength="75" appCharactersonly formControlName="pSpouseName" [ngClass]="{ 'is-invalid': contactValidationErrors.pSpouseName }">
          <div class="invalid-feedback">
            <span *ngIf="contactValidationErrors.pSpouseName">{{contactValidationErrors.pSpouseName}}</span>
          </div>
          <!--<small class="form-text">Error message or hint will go here</small>-->
        </div>
      </div>
      <hr>
      <div>

        <!--formArrayName="pcontactdetailsControls"-->
        <div class="row">
          <!--formGroupName="0"-->
          <div class="col-md-12 col-xl-12">
            <h2 class="sec-head"> Contact Information </h2>
          </div>
          <div class="col-md-6 col-xl-4">
            <div class="form-group ">
              <label id="pContactNumber" title="Primary Contact Number">Primary Contact Number</label>
              <input class="form-control" type="text" maxlength="12" placeholder="" appNumbersonly formControlName="pContactNumber" [ngClass]="{ 'is-invalid': contactValidationErrors.pContactNumber }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pContactNumber">{{contactValidationErrors.pContactNumber}}</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xl-4">
            <div class="form-group ">
              <label id="pAlternativeNo" title="Contact Number">Contact Number</label>
              <input class="form-control" type="text" maxlength="12" placeholder="" appNumbersonly formControlName="pAlternativeNo" [ngClass]="{ 'is-invalid': contactValidationErrors.pAlternativeNo }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pAlternativeNo">{{contactValidationErrors.pAlternativeNo}}</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xl-4">
            <div class="form-group ">
              <label id="pEmailId" title="Primary Email ID">Primary Email ID</label>
              <input class="form-control" type="text" maxlength="75" placeholder="" formControlName="pEmailId" [ngClass]="{ 'is-invalid': contactValidationErrors.pEmailId }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pEmailId">{{contactValidationErrors.pEmailId}}</span>
              </div>
            </div>
          </div>
          <hr class="light">
          <div class="col-md-6 col-xl-4">
            <div class="form-group ">
              <label id="pEmailId2" title="Email ID">Email ID</label>
              <input class="form-control" type="text" maxlength="75" placeholder="" formControlName="pEmailId2" [ngClass]="{ 'is-invalid': contactValidationErrors.pEmailId2 }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pEmailId2">{{contactValidationErrors.pEmailId2}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>

      <div formGroupName="pAddressControls">
        <div class="row">
          <div class="col-md-12 col-xl-12">
            <h2 class="sec-head"> Address Details</h2>
          </div>
          <div class="col-md-6  col-xl-4">
            <div class="form-group">
              <label id="pAddressType" title="Address Type">Address Type</label>
              <div class="input-group">
                <select class="form-control" formControlName="pAddressType" [ngClass]="{ 'is-invalid': contactValidationErrors.pAddressType }">
                  <option value="" ng-selected="selected">Select</option>
                  <option *ngFor="let addtype of addressTypeDetails" [value]="addtype.pAddressType">{{addtype.pAddressType}}</option>
                </select>
                <div class="input-group-append">
                  <button class="btn btn-lg-icon px-2 p-0" data-toggle="modal" data-target="#addresstype"> <img src="assets/images/icon-add-blue.svg" class="" width="18px" height="18px"></button>

                </div>

              </div>
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pAddressType">{{contactValidationErrors.pAddressType}}</span>
              </div>
            </div>
          </div>
          <hr class="light">
          <div class="col-md-6  col-xl-4">
            <div class="form-group">
              <label id="pAddress1" title="Address Line 1">Address Line 1</label>
              <input type="text" value="" maxlength="200" class="form-control" formControlName="pAddress1" [ngClass]="{ 'is-invalid': contactValidationErrors.pAddress1 }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pAddress1">{{contactValidationErrors.pAddress1}}</span>
              </div>
            </div>
          </div>
          <div class="col-md-6  col-xl-4">
            <div class="form-group">
              <label id="pAddress2" title="Address Line 2">Address Line 2</label>
              <input type="text" value="" maxlength="200" class="form-control" formControlName="pAddress2" [ngClass]="{ 'is-invalid': contactValidationErrors.pAddress2 }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pAddress2">{{contactValidationErrors.pAddress2}}</span>
              </div>
            </div>
          </div>


          <div class="col-md-6  col-xl-4">
            <div class="form-group">
              <label id="pCity" title="City/Village">City/Village</label>
              <input type="text" value="" maxlength="50" class="form-control" formControlName="pCity" [ngClass]="{ 'is-invalid': contactValidationErrors.pCity }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pCity">{{contactValidationErrors.pCity}}</span>
              </div>
            </div>
          </div>
          <hr class="light">

          <div class="col-md-6 col-xl-4">
            <div class="form-group">
              <label id="pCountry" title="Country">Country</label>
              <select id="" class="form-control" formControlName="pCountryId" [ngClass]="{ 'is-invalid': contactValidationErrors.pCountry }" (change)="pCountry_Change($event)">
                <option value="" ng-selected="selected">Select</option>
                <option *ngFor="let country of countryDetails" [value]="country.pCountryId">{{country.pCountry}}</option>
              </select>
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pCountry">{{contactValidationErrors.pCountry}}</span>
              </div>
            </div>

          </div>

          <div class="col-md-6  col-xl-4">
            <div class="d-flex">
              <div class="col-md-6 col-xl-6 pl-0">
                <div class="form-group">
                  <label id="pState" title="State">State</label>
                  <select id="" class="form-control" formControlName="pStateId" [ngClass]="{ 'is-invalid': contactValidationErrors.pState }" (change)="pState_Change($event)()">
                    <option value="" ng-selected="selected">Select</option>
                    <option *ngFor="let state of stateDetails" [value]="state.pStateId">{{state.pState}}</option>
                  </select>
                  <div class="invalid-feedback">
                    <span *ngIf="contactValidationErrors.pState">{{contactValidationErrors.pState}}</span>
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-xl-6 pr-0">
                <div class="form-group">
                  <label id="pDistrict" title="District">District</label>
                  <select id="" class="form-control" formControlName="pDistrictId" [ngClass]="{ 'is-invalid': contactValidationErrors.pDistrict }" (change)="pDistrict_Change($event)()">
                    <option value="" ng-selected="selected">Select</option>
                    <option *ngFor="let district of districtDetails" [value]="district.pDistrictId">{{district.pDistrict}}</option>
                  </select>
                  <div class="invalid-feedback">
                    <span *ngIf="contactValidationErrors.pDistrict">{{contactValidationErrors.pDistrict}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6  col-xl-4">

            <div class="form-group">
              <label id="pPinCode" title="Pincode">Pincode</label>
              <input type="text" value="" maxlength="6" class="form-control" appNumbersonly formControlName="pPinCode" [ngClass]="{ 'is-invalid':contactValidationErrors.pPinCode  }">
              <div class="invalid-feedback">
                <span *ngIf="contactValidationErrors.pPinCode">{{contactValidationErrors.pPinCode}}</span>
              </div>
            </div>

          </div>
        </div>
        <div class="d-flex justify-content-end  mt-4 ml-3 mb-4">
          <a href="" data-toggle="tab" class="btn  btn-b-icon px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" (click)="addAddressDeatails()"><img src="assets/images/icon-add-white.svg" class="mr-3" width="20px" height="20px">Add </a>
        </div>
        <hr>
        <div class="col-md-12 col-xl-12">
          <table id="example" class="table text-center" style="width:100%">
            <thead>
              <tr>

                <th>Primary Address</th>
                <th>Address Type</th>
                <th>Address Details</th>


              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let address of lstaddressdetails; let i = index">


                <td>
                  <input class="form-check-input" type="radio" name="pPrimaryAddressType" formControlName="pPrimaryAddressType" id="inlineRadio2" (change)="changeAddressPriority(i)" value='{{address.pAddressType}}'>
                </td>
                <td>{{address.pAddressType}}</td>
                <td>{{address.pAddressDetails}}</td>

              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="d-flex justify-content-end mt-4">
        <a href="#loanconfig" data-toggle="tab" class="btn btn-g-icon mr-4 px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" (click)="clearContactFormDeatails()"><img src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3" />Clear</a>
        <a href="#loanconfig" data-toggle="tab" class="btn btn-b-icon px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" (click)="saveContactDetails()"><img src="assets/images/icon-check-white.svg" width="20px" height="20px" class="mr-3" />{{formtype}}</a>
      </div>

    </form>

    <div class="modal fade pl-0" id="photo" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
      <div class="modal-dialog" style="margin-right:0px !important; ">
        <div class="model-cst modal-content">
          <app-photoupload (uploadPhoto)="loadImages($event)"></app-photoupload>
        </div>
      </div>
    </div>

    <!--The Modal For Address Type-->
    <div class="modal" id="addresstype">
      <div class="modal-dialog" style="margin-right:0px !important; ">
        <div class="model-cst modal-content">

          <div class="modal-body">

            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <form [formGroup]="addresstypeForm" autocomplete="off">
              <div class="form-group">
                <label id="pAddressTypeMst" title="Address Type">Address Type</label>
                <input type="text" class="form-control" formControlName="pAddressType" [ngClass]="{ 'is-invalid': addressTypeErrorMessage.pAddressTypeMst }" />
             
                <div class="invalid-feedback">
                  <span *ngIf="addressTypeErrorMessage.pAddressTypeMst">{{addressTypeErrorMessage.pAddressTypeMst}}</span>
                </div>
              </div>
              <div class="d-flex justify-content-end mt-4">
              <a class="close" data-dismiss="modal" class="btn btn-g-icon mr-4 px-3 border-0"(click)="clearAddressType()"><img src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3">Clear</a>
              <a href="" data-toggle="tab" class="btn btn-b-icon px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" (click)="saveAddressType()"><img src="assets/images/icon-check-white.svg" width="20px" height="20px" class="mr-3">Save</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

